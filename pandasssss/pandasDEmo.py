import pandas as pd
import numpy as np

#numpy中的ndarray与pandas的Series和DataFrame之间的相互转换

#numpy数据结构
stock = np.dtype([('date', np.str_, 10), ('open', np.float32), ('close', np.float32),
                      ('high', np.float32), ('low', np.float32), ('volume', np.float32),
                      ('code', np.float32)])
data = np.array([("2017-10-18", 11.53, 11.69, 11.70, 11.51, 871365.0, "000001"),
                     ("2017-10-19",  11.64,  11.63,  11.72,  11.57,   722764.0,  "000001"),
                     ("2017-10-20",  11.59,  11.48,  11.59,  11.41,   461808.0,  "000001"),
                     ("2017-10-23",  11.39,  11.19,  11.40,  11.15,  1074465.0,  "000001")],
                    dtype=stock)
# print (type(data))
# print (data)

# <class 'numpy.ndarray'>
# [('2017-10-18', 11.53, 11.69, 11.7 , 11.51,  871365., 1.)
#  ('2017-10-19', 11.64, 11.63, 11.72, 11.57,  722764., 1.)
#  ('2017-10-20', 11.59, 11.48, 11.59, 11.41,  461808., 1.)
#  ('2017-10-23', 11.39, 11.19, 11.4 , 11.15, 1074465., 1.)]



# series--->ndarray

data = [
            ["2017-10-18",  11.53,  11.69,  11.70,  11.51,   871365.0,  '000001'],
            ["2017-10-19",  11.64,  11.63,  11.72,  11.57,   722764.0,  '000001'],
            ["2017-10-20",  11.59,  11.48,  11.59,  11.41,   461808.0,  '000001'],
            ["2017-10-23",  11.39,  11.19,  11.40,  11.15,  1074465.0,  '000001']]
series = pd.Series(data, index=['a', 'b', 'c', 'd'])
#print ("series",series)
#将Series转换为ndarray类型,也可用series.values
# arr = series.as_matrix()
# print(type(arr))

# series a    [2017-10-18, 11.53, 11.69, 11.7, 11.51, 871365...
# b    [2017-10-19, 11.64, 11.63, 11.72, 11.57, 72276...
# c    [2017-10-20, 11.59, 11.48, 11.59, 11.41, 46180...
# d    [2017-10-23, 11.39, 11.19, 11.4, 11.15, 107446...
# dtype: object
# <class 'numpy.ndarray'>


#dataFrame---->ndarray
data = [
            [11.53,  11.69,  11.70,  11.51,   871365.0,  '000001'],
            [11.64,  11.63,  11.72,  11.57,   722764.0,  '000001'],
            [11.59,  11.48,  11.59,  11.41,   461808.0,  '000001'],
            [11.39,  11.19,  11.40,  11.15,  1074465.0,  '000001']]
df = pd.DataFrame(data, index=["2017-10-18", "2017-10-19", "2017-10-20", "2017-10-23"],
                      columns=["open", "close", "high", "low", "volume", "code"])
print (df)
print (df.as_matrix(['open', 'close'])) #方法1
print (df.values) #方法2
np.array(df) #方法3



